persistence true
persistence_location /mosquitto/data/

log_dest file /mosquitto/log/mosquitto.log

# TLS Listener with client authentication
listener 8883
cafile /mosquitto/config/certs/ca.crt
certfile /mosquitto/config/certs/broker.crt
keyfile /mosquitto/config/certs/broker.key
require_certificate true
use_identity_as_username false

# Authentication
allow_anonymous false
password_file /mosquitto/config/passwordfile
